{"version":3,"sources":["./src/app/modelo/tarifa.ts","./src/app/operacion/operacion-home/operacion-home.component.ts","./src/app/operacion/operacion-home/operacion-home.component.html","./src/app/operacion/operacion-lista/operacion-lista.component.ts","./src/app/operacion/operacion-lista/operacion-lista.component.html","./src/app/operacion/operacion-ticket/operacion-ticket.component.ts","./src/app/operacion/operacion-ticket/operacion-ticket.component.html","./src/app/operacion/operacion.module.ts"],"names":[],"mappings":"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","file":"operacion-operacion-module.js","sourcesContent":["export interface Tarifa {\n    factor: string;\n    factorTiempo: FactorTiempo;\n    tipo: Tipo;\n}\n\nexport enum FactorTiempo {\n    MINUTO = 'MINUTO',\n    HORA = 'HORA'\n}\n\nexport enum Tipo {\n    NORMAL = 'NORMAL',\n    FIN_SEMANA = 'FIN_SEMANA'\n}\n\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-operacion-home',\n  templateUrl: './operacion-home.component.html',\n  styleUrls: ['./operacion-home.component.css']\n})\nexport class OperacionHomeComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<body>\n  <div class=\"row\"></div>\n  <div class=\"container-fluid mt-4\">\n    <p class=\"tituloText\">OPERACIÓN</p>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-auto mb-3\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <p class=\"tituloTextCard\">ENTRADAS / SALIDAS</p>\n            <div class=\"container\">\n              <a routerLink=\"tickets\">\n                <button class=\"btn btn-warning\">\n                  OPERAR\n                </button></a\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"col-auto mb-3\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <p class=\"tituloTextCard\">OCUPACIÓN</p>\n            <div class=\"container\">\n              <a routerLink=\"plazas\">\n                <button class=\"btn btn-warning\">\n                  VER LISTADOS\n                </button></a\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</body>\n","import { TicketService } from './../../servicios/ticket.service';\nimport { Component, OnInit } from '@angular/core';\nimport { Ticket } from './../../modelo/ticket';\nimport { UtilService } from './../../servicios/util.service';\n\n@Component({\n  selector: 'app-operacion-lista',\n  templateUrl: './operacion-lista.component.html',\n  styleUrls: ['./operacion-lista.component.css']\n})\nexport class OperacionListaComponent implements OnInit {\n\n  constructor(\n    private ticketService: TicketService,\n    private utilService: UtilService\n    ) {}\n\n  columns = ['Numero de Ticket', 'Matricula', 'Hora de entrada'];\n  index = ['id', 'matricula', 'entrada'];\n  ticketsNoPagados:Ticket[]=[];\n\n  ngOnInit(): void {\n    this.ticketService.getTicketNoPagados().subscribe(\n      (response) => {\n        response.forEach((value, index) => {\n          value.entrada = this.utilService.formatearFecha(\n            new Date(value.entrada)\n          );\n        });\n        this.ticketsNoPagados = response;\n      },\n      (error) => console.log(error)\n    );\n  }\n\n}","<body>\n  <div class=\"row\"></div>\n  <div class=\"container-fluid mt-4\">\n    <p class=\"tituloText\">OPERACIÓN</p>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-auto mb-3\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <p class=\"tituloTextCard\">Vehiculos en Parking</p>\n            <div class=\"container\">\n              <button\n                class=\"btn btn-warning\"\n                data-toggle=\"modal\"\n                data-target=\"#modalTicketList2\"\n              >\n                OPERAR\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Modal de Vehiculos que no han salido del parking-->\n      <div class=\"modal fade\" id=\"modalTicketList2\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h6 class=\"modal-title\">\n                LISTA DE VEHICULOS EN EL PARKING\n              </h6>\n            </div>\n            <div class=\"row modal-body\">\n              <table id=\"tickets\">\n                <tr>\n                  <th *ngFor=\"let col of columns\">\n                    {{ col }}\n                  </th>\n                </tr>\n                <tr *ngFor=\"let ticket of ticketsNoPagados\">\n                  <td *ngFor=\"let col of index\">\n                    {{ ticket[col] }}\n                  </td>\n                </tr>\n              </table>\n            </div>\n            <div class=\"modal-footer\">\n              <button\n                type=\"button\"\n                class=\"btn btn-warning\"\n                data-dismiss=\"modal\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Cerramos el modal -->\n    </div>\n  </div>\n</body>\n","import { UtilService } from './../../servicios/util.service';\nimport { Plaza } from './../../modelo/plaza';\nimport { Tarifa, FactorTiempo } from './../../modelo/tarifa';\nimport { TicketWrapper } from './../../modelo/ticket-wrapper';\nimport { PlazaService } from './../../servicios/plaza.service';\nimport { TicketService } from './../../servicios/ticket.service';\nimport { Component, OnInit } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { FormBuilder } from '@angular/forms';\n\n//Necesario para usar el selector de jquery para abrir los modales\ndeclare var $: any;\n\n@Component({\n  selector: 'app-operacion-ticket',\n  templateUrl: './operacion-ticket.component.html',\n  styleUrls: ['./operacion-ticket.component.css'],\n})\nexport class OperacionTicketComponent implements OnInit {\n  plazasTotales: number;\n  plazasOcupadas: number;\n\n  // Formbuilder de angular - formulario reactivo, entrada\n  newTicketForm = this.fb.group({\n    matricula: ['', Validators.required],\n  });\n\n  // Formbuilder de angular - formulario reactivo, salida\n  payTicketForm = this.fb.group({\n    numeroTicket: ['', Validators.required],\n  });\n\n  // Declaracion de atributos de la clase operacionTicketComponent\n  ticket: TicketWrapper;\n  tarifa: Tarifa;\n  plaza: Plaza;\n  showFactura = false;\n  importe: string;\n  factorTiempo: string;\n  entradaFormateada: string;\n  salidaFormateada: string;\n\n  // se colocan los metodos de los servicios llamados en el constructor\n  constructor(\n    private fb: FormBuilder,\n    private ticketService: TicketService,\n    private plazaService: PlazaService,\n    private utilService: UtilService\n  ) {}\n\n  //llamamos a plazas totales y plazas ocupadas\n  ngOnInit(): void {\n    this.setPlazasTotales();\n    this.setPlazasOcupadas();\n  }\n\n  //no viene plaza o tarifa\n  crearTicket() {\n    this.ticketService\n      //Enviamos la matricula al Back\n      .crearTicket(this.newTicketForm.value.matricula)\n      //Recibimos el resultado\n      .subscribe(\n        (resultado) => {\n          this.ticket = resultado; //ya tenemos el ticket\n          this.setPlazasOcupadas();\n          //el link esta definido de padres a hijos\n          this.ticketService\n            .getTarifa(resultado._links.tarifa.href)\n            .subscribe((tarifa) => {\n              this.tarifa = tarifa;\n              this.formatearEntrada();\n              this.factorTiempo = this.tarifa.factorTiempo.toLowerCase();\n              //abrir el modal usando el selector de jquery\n              $('#modalTicket').modal('show');\n              this.newTicketForm.reset();\n            });\n        },\n        (error) => {\n          alert('La matricula ya existe');\n        }\n      );\n  }\n\n  formatearEntrada() {\n    this.entradaFormateada = this.utilService.formatearFecha(\n      new Date(this.ticket.entrada)\n    );\n  }\n\n  formatearSalida() {\n    this.salidaFormateada = this.utilService.formatearFecha(\n      new Date(this.ticket.salida)\n    );\n  }\n\n  pagarTicket() {\n    console.log(this.payTicketForm.value); // ver valor por consola\n    this.ticketService\n      .pagarTicket(this.payTicketForm.value.numeroTicket)\n      .subscribe((resultado) => {\n        //el .value devuelve un json con los controlname\n        this.ticket = resultado;\n        this.setPlazasOcupadas();\n        this.setPlazasTotales();\n        this.ticketService\n          .getTarifa(resultado._links.tarifa.href)\n          .subscribe((tarifa) => {\n            this.tarifa = tarifa;\n            this.importe = this.calcularImporte().toFixed(2);\n            this.formatearEntrada();\n            this.formatearSalida();\n            this.factorTiempo = this.tarifa.factorTiempo\n              .toLowerCase()\n              .substring(0, 1);\n            this.showFactura = true;\n            $('#modalFactura').modal('show');\n            this.payTicketForm.reset();\n          });\n      });\n  }\n\n  setPlazasTotales() {\n    return this.plazaService\n      .getPlazasTotales()\n      .subscribe((plazas) => (this.plazasTotales = plazas));\n  }\n\n  setPlazasOcupadas() {\n    return this.plazaService\n      .getPlazasOcupadas()\n      .subscribe((plazas) => (this.plazasOcupadas = plazas));\n  }\n\n  calcularImporte() {\n    const entrada = new Date(this.ticket.entrada);\n    const salida = new Date(this.ticket.salida);\n    let tiempo: number;\n\n    if (this.tarifa.factorTiempo === FactorTiempo.MINUTO) {\n      tiempo = (salida.getTime() - entrada.getTime()) / (60 * 1000); //minutos\n    } else {\n      tiempo = (salida.getTime() - entrada.getTime()) / (60 * 60 * 1000); //horas\n    }\n    return tiempo * Number(this.tarifa.factor);\n  }\n}\n","<body>\n  <div class=\"row\"></div>\n  <div class=\"container-fluid mt-4\">\n    <p class=\"tituloText\">Plazas {{ plazasOcupadas }}/{{ plazasTotales }}</p>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-auto mb-3\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <p class=\"tituloTextCard\">ADMISIÓN</p>\n            <div class=\"container\">\n              <form [formGroup]=\"newTicketForm\" (ngSubmit)=\"crearTicket()\">\n                <input\n                  class=\"form-control form-control-dark\"\n                  placeholder=\"Matricula\"\n                  type=\"text\"\n                  formControlName=\"matricula\"\n                  required\n                /><br />\n                <button\n                  class=\"btn btn-warning\"\n                  type=\"submit\"\n                  [disabled]=\"!newTicketForm.valid\"\n                >\n                  ENTRAR\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"col-auto mb-3\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <p class=\"tituloTextCard\">SALIDA</p>\n            <div class=\"container\">\n              <form [formGroup]=\"payTicketForm\" (ngSubmit)=\"pagarTicket()\">\n                <input\n                  class=\"form-control form-control-dark\"\n                  placeholder=\"Nº de Ticket\"\n                  type=\"text\"\n                  formControlName=\"numeroTicket\"\n                  required\n                /><br />\n                <button\n                  class=\"btn btn-warning\"\n                  type=\"submit\"\n                  [disabled]=\"!payTicketForm.valid\"\n                >\n                  VALIDAR\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!--Modales asociados a la primera tarjeta -->\n\n  <!-- Modal emergente -->\n  <div class=\"modal fade\" id=\"modalTicket\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-sm\">\n      <div *ngIf=\"ticket && tarifa\" class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h6 class=\"modal-title\">\n            IMPRIMIR TICKET\n          </h6>\n        </div>\n        <div class=\"row modal-body\">\n          <div class=\"container col-md-6 mb-3\">\n            <label>Matricula</label>\n            <p>{{ ticket.matricula }}</p>\n          </div>\n          <div class=\"col-md-6 mb-3\">\n            <label>Nº Ticket</label>\n            <p>{{ ticket.id }}</p>\n          </div>\n          <div class=\"container col-md-6 mb-3\">\n            <label>Hora Entrada</label>\n            <p>{{ entradaFormateada }}</p>\n          </div>\n          <div class=\"col-md-6 mb-3\">\n            <label>Tarifa</label>\n            <p>{{ tarifa.factor }} / {{ factorTiempo }}</p>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">\n            Aceptar\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Cerramos el modal -->\n\n  <!-- Modal emergente de la receta, texto descriptivo emergente, tomamos el id \"ModalCard1Receta\" para referenciarlo en los botones -->\n  <div class=\"modal fade\" id=\"modalFactura\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-sm\">\n      <div *ngIf=\"showFactura\" class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h6 class=\"modal-title\">\n            IMPRIMIR FACTURA\n          </h6>\n        </div>\n        <div class=\"row modal-body\">\n          <div class=\"container col-md-6 mb-3\">\n            <label>Matricula</label>\n            <p>{{ ticket.matricula }}</p>\n          </div>\n          <div class=\"container col-md-6 mb-3\">\n            <picture>\n              <img\n                src=\".\\assets\\img\\logo.png\"\n                alt=\"SIGEPARK\"\n                title=\"Sistema de Gestión de Parking\"\n                width=\"50\"\n              />\n            </picture>\n          </div>\n          <div class=\"container col-md-6 mb-3\">\n            <label>Hora Entrada</label>\n            <p>{{ entradaFormateada }}</p>\n          </div>\n          <div class=\"container col-md-6 mb-3\">\n            <label>Hora de Salida</label>\n            <p>{{ salidaFormateada }}</p>\n          </div>\n          <div class=\"col-md-6 mb-3\">\n            <label>Tarifa</label>\n            <p>{{ tarifa.factor }} / {{ factorTiempo }}</p>\n          </div>\n          <div class=\"col-md-6 mb-3\">\n            <label>Importe</label>\n            <p>{{ importe }} Euros</p>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">\n            Aceptar\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Cerramos el modal -->\n</body>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { OperacionHomeComponent } from './operacion-home/operacion-home.component';\nimport { OperacionListaComponent } from './operacion-lista/operacion-lista.component';\nimport { OperacionTicketComponent } from './operacion-ticket/operacion-ticket.component';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ComunModule } from '../comun/comun.module';\n\n//Declaramos las rutas del modulo \nconst routes: Routes = [\n  {\n    path: '',\n    component: OperacionHomeComponent\n  },\n  {\n    path: 'plazas',\n    component: OperacionListaComponent\n  },\n  {\n    path: 'tickets',\n    component: OperacionTicketComponent\n  }\n\n];\n\n@NgModule({\n  declarations: [OperacionHomeComponent, OperacionListaComponent, OperacionTicketComponent],\n  imports: [\n    CommonModule,\n    ComunModule,\n    RouterModule.forChild(routes)\n  ]\n})\nexport class OperacionModule { }\n"],"sourceRoot":"webpack:///"}